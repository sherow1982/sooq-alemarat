<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emirates Souq | Best Products & Exclusive Offers 2025</title>
  <meta name="description" content="Discover the best products and exclusive offers at Emirates Souq. Electronics, home appliances, fashion, and more with 1-3 days delivery and cash on delivery across the UAE." />
  <link rel="canonical" href="https://sherow1982.github.io/sooq-alemarat/en/" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <!-- Unify theme with Arabic site -->
  <link rel="stylesheet" href="../css/improved-theme.css" />
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif; }
    .ltr { direction: ltr; text-align: left; }
    .hero-section { text-align: left; }
    .section-title { text-align: left; }
  </style>
</head>
<body class="ltr">
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <a href="./" class="logo">
          <img src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/b1f430c1-8aa0-4082-8bec-59935fddfaa2.png" alt="Emirates Souq" style="height: 40px; margin-right: 12px;" />
          <span>Emirates Souq</span>
        </a>
        <nav>
          <ul class="nav-list">
            <li><a href="#categories">Categories</a></li>
            <li><a href="#featured">Featured</a></li>
            <li><a href="../cart.html" target="_blank">Cart</a></li>
            <li><a href="../">العربية</a></li>
            <li><a href="../legal/terms.html" target="_blank">Terms</a></li>
            <li><a href="../legal/privacy.html" target="_blank">Privacy</a></li>
            <li><a href="../legal/shipping.html" target="_blank">Shipping</a></li>
            <li><a href="../legal/returns.html" target="_blank">Returns</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero-section">
    <div class="container">
      <h1 class="hero-title">Welcome to Emirates Souq</h1>
      <p class="hero-description">Thousands of products at the best prices with fast shipping and cash on delivery across the UAE.</p>
      <div class="search-box">
        <input type="search" id="en-search" class="search-input" placeholder="Search products..." />
        <button class="search-btn" id="en-search-btn">🔍</button>
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section id="categories" class="section">
    <div class="container">
      <h2 class="section-title">Shop by Category</h2>
      <div class="categories-grid" id="en-categories-container">
        <div class="loading"><div class="loading-spinner"></div><h3>Loading categories...</h3></div>
      </div>
    </div>
  </section>

  <!-- Products -->
  <section id="featured" class="section">
    <div class="container">
      <div class="tabs-nav">
        <button class="tab-btn active" data-tab="en-featured">Featured (AED 300+)</button>
        <button class="tab-btn" data-tab="en-all">All Products</button>
      </div>

      <div class="tab-content active" id="en-featured">
        <div class="products-grid" id="en-featured-container">
          <div class="loading"><div class="loading-spinner"></div><h3>Loading featured products...</h3></div>
        </div>
      </div>

      <div class="tab-content" id="en-all">
        <div class="products-grid" id="en-all-container">
          <div class="loading"><div class="loading-spinner"></div><h3>Loading all products...</h3></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Emirates Souq</h3>
          <p>Leading digital shopping experience in the UAE.</p>
        </div>
        <div class="footer-section">
          <h3>Links</h3>
          <div>
            <a href="../legal/terms.html" target="_blank">Terms</a><br />
            <a href="../legal/privacy.html" target="_blank">Privacy</a><br />
            <a href="../legal/shipping.html" target="_blank">Shipping</a><br />
            <a href="../legal/returns.html" target="_blank">Returns</a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Contact</h3>
          <div>
            <a href="https://wa.me/201110760081" target="_blank">WhatsApp</a><br />
            <a href="tel:+201110760081">Call</a><br />
            <a href="../cart.html" target="_blank">Cart</a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Our Services</h3>
          <div>🚚 Free Shipping<br />💰 Cash on Delivery<br />🔄 7-day Returns<br />⭐ 24/7 Support</div>
        </div>
      </div>
      <div style="border-top:1px solid #666; padding-top:1.5rem; margin-top:1.5rem; text-align:left;">
        <p>&copy; 2025 Emirates Souq. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Floating WhatsApp -->
  <a href="https://wa.me/201110760081?text=Hello%2C%20I%20want%20to%20contact%20Emirates%20Souq%20team" class="whatsapp-float" target="_blank" title="WhatsApp">📱</a>

  <script src="../js/cart.js"></script>
  <script>
    // Load Arabic data and render in English UI
    const DATA_SRC = '../data/uae-products.json';
    const FEATURED_PRICE = 300;

    function priceOf(p){ return Number(p.sale_price || p.regular_price || 0); }

    function createCategorySlug(name){
      return name.replace(/\s+/g,'-').replace(/[^\w\-\u0600-\u06FF]/g,'').replace(/--+/g,'-');
    }

    function renderCategories(products){
      const container = document.getElementById('en-categories-container');
      const counts = {};
      products.forEach(p=>{ counts[p.category] = (counts[p.category]||0)+1; });
      const entries = Object.entries(counts).sort((a,b)=>b[1]-a[1]);
      container.innerHTML='';
      entries.forEach(([name,count])=>{
        const slug = createCategorySlug(name);
        const titleEn = name; // keep Arabic category labels; UI is English
        const card = document.createElement('div');
        card.className='category-card';
        card.setAttribute('data-category', name);
        card.innerHTML = `
          <div class="category-icon">🏷️</div>
          <h3 class="category-name">${titleEn}</h3>
          <div class="category-count">${count} products</div>
        `;
        card.onclick = ()=>{
          // open Arabic SEO category pages for consistency
          window.open('../'+(window.getCategoryPage?window.getCategoryPage(name):'miscellaneous-products.html'),'_blank','noopener');
        };
        container.appendChild(card);
      });
    }

    function productCard(p){
      const current = priceOf(p);
      const original = p.sale_price && p.regular_price>p.sale_price ? `<span class="original-price">${p.regular_price} AED</span>` : '';
      const title = p.title.length>60 ? p.title.slice(0,60)+'…' : p.title;
      const img = p.image_url || 'https://via.placeholder.com/400x300/1e40af/FFFFFF?text=Product';
      const wMsg = `Hello, I'm interested in: ${p.title} (Price: ${current} AED)`;
      return `
        <div class="product-card" data-product-id="${p.id}">
          <div class="product-image" style="cursor:pointer;" onclick="openProduct('${p.id}')">
            <img src="${img}" alt="${title}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x300/1e40af/FFFFFF?text=Product'" />
          </div>
          <div class="product-info">
            <div class="product-category">${p.category}</div>
            <h3 class="product-title" onclick="openProduct('${p.id}')" style="cursor:pointer;">${title}</h3>
            <div class="product-price">
              <span class="current-price">${current} AED</span>
              ${original}
            </div>
            <div class="product-actions">
              <button class="btn add-to-cart" onclick="addToCart('${p.id}', '${p.title.replace(/"/g,'&quot;')}', ${current}, '${img.replace(/"/g,'&quot;')}')">🛒 Add</button>
              <a class="btn whatsapp-btn" href="https://wa.me/201110760081?text=${encodeURIComponent(wMsg)}" target="_blank" rel="noopener">📱 WhatsApp</a>
              <button class="btn view-details" onclick="openProduct('${p.id}')">👁 View</button>
            </div>
          </div>
        </div>`;
    }

    function openProduct(id){ window.open('../product.html?id='+encodeURIComponent(id), '_blank', 'noopener'); }

    function addToCart(id,title,price,image){
      const key='emirates_cart';
      const items = JSON.parse(localStorage.getItem(key)||'[]');
      const it = items.find(i=>i.id==id);
      if(it){ it.quantity=(it.quantity||1)+1; } else { items.push({id,title,price,image,quantity:1,addedAt:Date.now()}); }
      localStorage.setItem(key, JSON.stringify(items));
    }

    async function loadData(){
      const res = await fetch(DATA_SRC);
      const data = await res.json();
      return data.map(p=>({ ...p, sale_price: Number(p.sale_price||0), regular_price: Number(p.regular_price||0) }));
    }

    function renderProducts(data){
      const featured = data.filter(p=>priceOf(p)>=FEATURED_PRICE).slice(0,12);
      const enFeatured = document.getElementById('en-featured-container');
      const enAll = document.getElementById('en-all-container');
      enFeatured.innerHTML = featured.map(productCard).join('');
      enAll.innerHTML = data.sort((a,b)=>a.title.localeCompare(b.title,'ar')).map(productCard).join('');
    }

    document.addEventListener('DOMContentLoaded', async ()=>{
      // load category routing from Arabic if available
      const script = document.createElement('script');
      script.src = '../js/category-routing.js';
      document.head.appendChild(script);

      const data = await loadData();
      renderCategories(data);
      renderProducts(data);

      // tabs
      document.querySelectorAll('.tab-btn').forEach(btn=>{
        btn.addEventListener('click',()=>{
          document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
          btn.classList.add('active');
          document.getElementById(btn.dataset.tab).classList.add('active');
        });
      });

      // search
      document.getElementById('en-search-btn').addEventListener('click', doSearch);
      document.getElementById('en-search').addEventListener('keypress', (e)=>{ if(e.key==='Enter') doSearch(); });
      function doSearch(){
        const q = (document.getElementById('en-search').value||'').trim();
        if(!q||q.length<2) return;
        const results = data.filter(p=> (p.title+" "+(p.description||"")).toLowerCase().includes(q.toLowerCase()));
        document.querySelector('[data-tab="en-all"]').click();
        document.getElementById('en-all-container').innerHTML = results.map(productCard).join('') || '<p>No results found.</p>';
      }
    });
  </script>
</body>
</html>
